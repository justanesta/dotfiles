[user]
    email = {{ .email }}
    name = {{ .name }}

[init]
    defaultBranch = main

[core]
    editor = code --wait
    autocrlf = input
    excludesfile = ~/.config/git/ignore

[fetch]
    prune = true

[diff]
    algorithm = histogram

[merge]
    conflictstyle = zdiff3

{{- if eq .chezmoi.os "linux" }}

[credential "https://github.com"]
    helper = !/usr/bin/gh auth git-credential

[credential "https://gist.github.com"]
    helper = !/usr/bin/gh auth git-credential

[credential]
    helper = cache --timeout=28800
{{- end }}

{{- if eq .chezmoi.os "darwin" }}

[credential "https://github.com"]
    helper = !/opt/homebrew/bin/gh auth git-credential

[credential "https://gist.github.com"]
    helper = !/opt/homebrew/bin/gh auth git-credential
{{- end }}

[alias]
    # Status / inspection
    st = status
    br = branch
    bra = branch -a
    lg = log --oneline --graph --decorate
    lls = log --stat
    ld = log --oneline --decorate
    sh = show

    # Add / commit
    a = add
    aa = add -A
    ci = commit
    cm = commit -m
    ca = commit --amend
    can = commit --amend --no-edit

    # Diff
    d = diff
    ds = diff --staged
    dc = diff --cached

    # Branch / checkout
    co = checkout
    cb = checkout -b
    sw = switch
    swc = switch -c

    # Pull / push
    p = push
    pf = push --force-with-lease
    pl = pull